# DocumentaÃ§Ã£o de Arquitetura 

## Estrutura de DiretÃ³rios do Projeto

```
cdi-ipca-analysis/
â”œâ”€â”€ main.py                      # Ponto de entrada da aplicaÃ§Ã£o
â”œâ”€â”€ README.md                    # DocumentaÃ§Ã£o do projeto
â”œâ”€â”€ LICENSE                      # LicenÃ§a do projeto
â”œâ”€â”€ ARCHITECTURE.md              # DocumentaÃ§Ã£o de arquitetura
â”œâ”€â”€ CONTRIBUTING.md              # Guia de contribuiÃ§Ã£o
â”œâ”€â”€ REQUIREMENTS.txt             # DependÃªncias do projeto
â”‚
â”œâ”€â”€ data/                        # DiretÃ³rio de dados
â”‚   â”œâ”€â”€ raw/                     # Dados brutos da API
â”‚   â”‚   â”œâ”€â”€ monthly_cdi/        # CDI mensal
â”‚   â”‚   â”œâ”€â”€ yearly_cdi/         # CDI anual
â”‚   â”‚   â””â”€â”€ ipca/               # IPCA mensal
â”‚   â””â”€â”€ processed/              # Dados processados
â”‚       â”œâ”€â”€ cdi_data.xlsx       # Base CDI
â”‚       â””â”€â”€ ipca_data.xlsx      # Base IPCA
â”‚
â”œâ”€â”€ src/                        # CÃ³digo fonte
â”‚   â”œâ”€â”€ config.py              # ConfiguraÃ§Ãµes da API
â”‚   â”œâ”€â”€ pipeline.py            # Orquestrador da pipeline
â”‚   â”‚
â”‚   â”œâ”€â”€ fetch/                 # MÃ³dulos de coleta
â”‚   â”‚   â”œâ”€â”€ fetch_cdi.py      # Busca CDI
â”‚   â”‚   â””â”€â”€ fetch_ipca.py     # Busca IPCA
â”‚   â”‚
â”‚   â”œâ”€â”€ transform/             # MÃ³dulos de transformaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ cdi_transform.py  # CÃ¡lculos CDI
â”‚   â”‚   â”œâ”€â”€ ipca_transform.py # CÃ¡lculos IPCA
â”‚   â”‚   â””â”€â”€ tax_rates.py      # Tabela IR (implementaÃ§Ã£o futura)
â”‚   â”‚
â”‚   â”œâ”€â”€ storage/               # MÃ³dulos de persistÃªncia
â”‚   â”‚   â”œâ”€â”€ excel_cdi.py      # PersistÃªncia CDI
â”‚   â”‚   â”œâ”€â”€ excel_ipca.py     # PersistÃªncia IPCA
â”‚   â”‚   â””â”€â”€ schema.py         # Schemas de dados
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                # Modelos de dados
â”‚   â”‚   â””â”€â”€ cdb.py            # Modelo CDB
â”‚   â”‚
â”‚   â””â”€â”€ utils/                 # UtilitÃ¡rios
â”‚       â”œâ”€â”€ date_utils.py     # Utilidades de data
â”‚       â””â”€â”€ directory_utils.py # Utilidades de diretÃ³rio
â”‚
â”œâ”€â”€ scripts/                   # Scripts auxiliares
â”‚   â”œâ”€â”€ run_pipeline.bat      # Script Windows
â”‚   â””â”€â”€ run_pipeline.sh       # Script Unix/Linux
â”‚
â”œâ”€â”€ notebooks/                 # Jupyter notebooks (implementaÃ§Ã£o futura)
â””â”€â”€ tests/                     # Testes unitÃ¡rios (implementaÃ§Ã£o futura)
```


## Diagrama de Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     USUÃRIO / SCHEDULER                         â”‚
â”‚               (ExecuÃ§Ã£o Manual ou AutomÃ¡tica)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MAIN.PY                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚  Argumentos CLI  â”‚                         â”‚
â”‚                    â”‚  â”€ mode          â”‚                         â”‚
â”‚                    â”‚  â”€ persistence   â”‚                         â”‚
â”‚                    â”‚  â”€ year          â”‚                         â”‚
â”‚                    â”‚  â”€ clear-data    â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PIPELINE.PY                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚  Orquestrador    â”‚                         â”‚
â”‚                    â”‚  â”€ _run_month    â”‚                         â”‚
â”‚                    â”‚  â”€ _run_year     â”‚                         â”‚
â”‚                    â”‚  â”€ _run_backfill â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚                 â”‚               â”‚               â”‚
  â”‚ FETCH           â”‚ TRANSFORM     â”‚ LOAD          â”‚ UTILS
  â”‚                 â”‚               â”‚               â”‚
  â–¼                 â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API    â”‚    â”‚ CÃ¡lculos â”‚    â”‚  Excel   â”‚    â”‚  Date    â”‚
â”‚ BCB    â”‚    â”‚ CDI/IPCA â”‚    â”‚  SQLite  â”‚    â”‚ Business â”‚
â”‚        â”‚    â”‚ Impostos â”‚    â”‚  (futuro)â”‚    â”‚   Days   â”‚
â”‚ fetch_ â”‚    â”‚ cdi_     â”‚    â”‚ excel_   â”‚    â”‚ date_    â”‚
â”‚ cdi.py â”‚    â”‚ transformâ”‚    â”‚ cdi.py   â”‚    â”‚ utils.py â”‚
â”‚ fetch_ â”‚    â”‚ ipca_    â”‚    â”‚ excel_   â”‚    â”‚ directoryâ”‚
â”‚ ipca.pyâ”‚    â”‚ transformâ”‚    â”‚ ipca.py  â”‚    â”‚ _utils.pyâ”‚
â”‚        â”‚    â”‚ tax_     â”‚    â”‚          â”‚    â”‚          â”‚
â”‚        â”‚    â”‚ rates.py â”‚    â”‚          â”‚    â”‚          â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚              â”‚               â”‚
    â–¼              â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ARMAZENAMENTO                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   data/raw/       â”‚          â”‚  data/processed/  â”‚           â”‚
â”‚  â”‚  â”€ monthly_cdi/   â”‚          â”‚  â”€ cdi_data.xlsx  â”‚           â”‚
â”‚  â”‚  â”€ yearly_cdi/    â”‚          â”‚  â”€ ipca_data.xlsx â”‚           â”‚
â”‚  â”‚  â”€ ipca/          â”‚          â”‚                   â”‚           â”‚
â”‚  â”‚  (JSON backups)   â”‚          â”‚  (Dados limpos)   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Fluxo de Dados (ETL)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract  â”‚  API do Banco Central do Brasil
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â†“
     â”‚        â€¢ SÃ©rie 12: CDI Taxa de juros DiÃ¡rio (nÃ£o usada)
     â”‚        â€¢ SÃ©rie 4391: CDI Mensal
     â”‚        â€¢ SÃ©rie 4392: CDI Anual
     â”‚        â€¢ SÃ©rie 433: IPCA Mensal
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          JSON Response                   â”‚
â”‚  {                                       â”‚
â”‚    "data": "01/01/2025",                 â”‚
â”‚    "valor": "0.87"                       â”‚
â”‚  }                                       â”‚ 
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Transform â”‚  Processamento
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â†“
     â”‚        â€¢ ConversÃ£o de tipos
     â”‚        â€¢ CÃ¡lculo de fatores diÃ¡rios
     â”‚        â€¢ Taxas acumuladas
     â”‚        â€¢ ValidaÃ§Ãµes
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Dados Estruturados                 â”‚
â”‚  {                                       â”‚
â”‚    "year": 2025,                         â”‚
â”‚    "month": 1,                           â”‚
â”‚    "cdi_monthly_rate": 0.87,             â”‚
â”‚    "cdi_annual_rate": 10.65              â”‚
â”‚  }                                       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Load   â”‚  PersistÃªncia
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â†“
     â”‚        â€¢ Excel (atual)
     â”‚        â€¢ SQLite (futuro)
     â”‚        â€¢ PostgreSQL (futuro)
     â”‚        â€¢ Backup JSON
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Armazenamento Final                â”‚
â”‚                                           â”‚
â”‚  ğŸ“Š cdi_data.xlsx                         â”‚
â”‚  ğŸ“Š ipca_data.xlsx                        â”‚
â”‚  ğŸ“„ monthly_cdi_2025-01.json              â”‚
â”‚  ğŸ“„ yearly_cdi_2025-01.json               â”‚
â”‚  ğŸ“„ ipca_2025-01.json                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Modos de ExecuÃ§Ã£o

### 1ï¸âƒ£ Month Mode (Modo Mensal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  python main.py --mode month            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Data Atual?  â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
         â”‚ Dia Ãštil? â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          NÃ£o  â”‚  Sim
         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚JÃ¡ Processado?â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          NÃ£o  â”‚  Sim
         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚ Fetch CDI  â”‚
         â”‚ Fetch IPCA â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
               â”‚
         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
         â”‚ Transform â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
               â”‚
         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
         â”‚   Load    â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
           Sucesso!
```

### 2ï¸âƒ£ Yearly Mode (Modo Anual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  python main.py --mode yearly --year 2025   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Range: 01/01   â”‚
      â”‚   atÃ©: 31/12   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Fetch ALL Data â”‚
      â”‚  CDI + IPCA    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Para cada entrada: â”‚
      â”‚ â”œâ”€ JÃ¡ processado?  â”‚
      â”‚ â”‚   â””â”€ Sim: Pula   â”‚
      â”‚ â”‚   â””â”€ NÃ£o: â†“      â”‚
      â”‚ â”œâ”€ Transform       â”‚
      â”‚ â””â”€ Load            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
          Ano completo!
```

### 3ï¸âƒ£ Backfill Mode (Preenchimento de lacunas)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  python main.py --mode backfill         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Scan data/raw/ â”‚
      â”‚ Encontra datas â”‚
      â”‚ jÃ¡ processadas â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Identifica     â”‚
      â”‚ Min/Max Date   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Fetch Range    â”‚
      â”‚ Completo       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Para cada data:    â”‚
      â”‚ â”œâ”€ Existe?         â”‚
      â”‚ â”‚   â””â”€ Sim: Pula   â”‚
      â”‚ â”‚   â””â”€ NÃ£o: â†“      â”‚
      â”‚ â”œâ”€ Transform       â”‚
      â”‚ â””â”€ Load            â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        Lacunas preenchidas!
```

## Modelo de Dados

### CDI (Excel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ year â”‚ month â”‚ cdi_monthly_rate â”‚ cdi_annual_rate  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2025 â”‚   1   â”‚      0.87        â”‚      10.65       â”‚
â”‚ 2025 â”‚   2   â”‚      0.91        â”‚      11.20       â”‚
â”‚ 2025 â”‚   3   â”‚      0.85        â”‚      10.40       â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### IPCA (Excel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ year â”‚ month â”‚ipca_monthly_rate â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2025 â”‚   1   â”‚      0.0042      â”‚   
â”‚ 2025 â”‚   2   â”‚      0.0038      â”‚  
â”‚ 2025 â”‚   3   â”‚      0.0045      â”‚      
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JSON Backup (Raw Data)

```json
{
  "reference_date": "2025-01",
  "type": "monthly_cdi",
  "value": 0.87
}
```

## Casos de Uso

### 1. Investidor Individual
```
Objetivo: Acompanhar rendimento de CDB
â”œâ”€ Executar: python main.py (diÃ¡rio)
â”œâ”€ Analisar: Excel com histÃ³rico completo
â””â”€ Calcular: IR, rendimento lÃ­quido
```

### 2. Analista Financeiro
```
Objetivo: AnÃ¡lise histÃ³rica e comparaÃ§Ãµes
â”œâ”€ Executar: python main.py --mode yearly --year 2024
â”œâ”€ Exportar: Dados para ferramentas de anÃ¡lise
â””â”€ Visualizar: GrÃ¡ficos CDI vs IPCA
```

### 3. Pesquisador
```
Objetivo: Estudos de correlaÃ§Ã£o econÃ´mica
â”œâ”€ Executar: Backfill para dados histÃ³ricos
â”œâ”€ Integrar: Pandas/NumPy para anÃ¡lises
â””â”€ Publicar: Resultados de pesquisa
```

### 4. Desenvolvedor
```
Objetivo: Integrar com outras aplicaÃ§Ãµes
â”œâ”€ Usar: Como mÃ³dulo Python
â”œâ”€ Acessar: Dados via Excel ou API
â””â”€ Estender: Novos indicadores
```

## Stack TecnolÃ³gico

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Frontend (Futuro)             â”‚
â”‚   Dashboard Web - Streamlit/Dash        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Camada de AplicaÃ§Ã£o             â”‚
â”‚                                         â”‚
â”‚  Python 3.8+                            â”‚
â”‚  â”œâ”€ CLI (argparse)                      â”‚
â”‚  â”œâ”€ Pipeline (ETL)                      â”‚
â”‚  â””â”€ Models (CDB)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Bibliotecas Core                 â”‚
â”‚                                         â”‚
â”‚  â”œâ”€ Pandas      (Data manipulation)     â”‚
â”‚  â”œâ”€ Requests    (HTTP client)           â”‚
â”‚  â”œâ”€ OpenPyXL    (Excel I/O)             â”‚
â”‚  â”œâ”€ NumPy       (Numerical computing)   â”‚
â”‚  â””â”€ dateutil    (Date utilities)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Data Sources                   â”‚
â”‚                                         â”‚
â”‚  API BCB (https://api.bcb.gov.br)       â”‚
â”‚  â”œâ”€ SÃ©rie 12: CDI DiÃ¡rio                â”‚
â”‚  â”œâ”€ SÃ©rie 4391: CDI Mensal              â”‚
â”‚  â””â”€ SÃ©rie 433: IPCA                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PersistÃªncia                   â”‚
â”‚                                         â”‚
â”‚  â”œâ”€ Excel (.xlsx)            [Atual]    â”‚
â”‚  â”œâ”€ JSON (backups brutos)    [Atual]    â”‚
â”‚  â””â”€ SQLite (.db)             [Futuro]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Roadmap

### VersÃ£o 0.1.0 (Atual)
- [x] Pipeline ETL bÃ¡sica
- [x] CDI e IPCA implementados
- [x] PersistÃªncia Excel
- [x] CriaÃ§Ã£o dos mÃ©todos de execuÃ§Ã£o principais
- [x] Classe CDB
- [x] DocumentaÃ§Ã£o bÃ¡sica

### VersÃ£o 0.2.0 
- [ ] RevisÃ£o dos mÃ©todos de execuÃ§Ã£o
- [ ] Estrutura de fetchs escalÃ¡vel e modular
- [ ] Estrutura de persistÃªncia modular e escalÃ¡vel
- [ ] CÃ¡lculo de todas as mensuraÃ§Ãµes de CDI e IPCA
- [ ] Testes automatizados (pytest)
- [ ] AnÃ¡lises e dashboards bÃ¡sicos

### VersÃ£o 0.3.0 
- [ ] Estrutura da pipeline escalÃ¡vel
- [ ] Metadados na persistÃªncia
- [ ] PersistÃªncia em SQLite
- [ ] Scripts de automaÃ§Ã£o de execuÃ§Ã£o 
- [ ] Mais indicadores
- [ ] Planilhas e notebooks de demonstraÃ§Ã£o
- [ ] Logs de execuÃ§Ã£o

### VersÃµes 0.4.0 < 
- [ ] Todos os indicadores principais implementados com todas as mensuraÃ§Ãµes
- [ ] Machine Learning (previsÃµes)
- [ ] Classes de outros tÃ­tulos
- [ ] Simuladores de investimento
- [ ] Dashboard web interativo completo
- [ ] DocumentaÃ§Ã£o completa
- [ ] Notebooks educacionais e tutoriais
- [ ] Logo e identidade visual
- [ ] PossÃ­vel API REST para acesso aos dados processados
- [ ] PossÃ­vel GUI


---

**DocumentaÃ§Ã£o visual mantida por:** rafaGarciaT
**Ãšltima atualizaÃ§Ã£o:** Janeiro 2026

